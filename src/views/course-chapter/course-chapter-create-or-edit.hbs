<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Acasă</a></li>
        <li class="breadcrumb-item"><a href="/cursuri/modifica">Cursuri</a></li>
        <li class="breadcrumb-item"><a href="/cursuri/{{courseId}}/modifica">{{courseCode}}</a></li>
        {{#if isEditMode}}
        <li class="breadcrumb-item active">Cap.{{inc chapterIndex}}</li>
        {{/if}}
        
        {{#if isEditMode}}
        <li title="Json" class="ms-auto me-2"><a href="/cursuri/{{courseId}}/capitole/{{chapter.id}}/json"><i class="bi bi-braces me-1"></i></a></li>
        <li title="Vizualizează"><a href="/cursuri/{{courseId}}/capitole/{{chapterId}}"><i class="bi bi-eye me-1"></i></a></li>
        {{/if}}
    </ol>
</nav>

<h1>{{#if isEditMode}}Cap.{{inc chapterIndex}}: {{chapter.name}}{{else}}Capitol
    nou{{/if}}</h1>

{{#if isEditMode}}
<ul class="nav nav-tabs">
    <li class="nav-item">
        {{!-- <a class="nav-link active fs-5" aria-current="page" href="#">Teorie</a> --}}
        <button class="nav-link active" id="lessons-tab" data-bs-toggle="tab" data-bs-target="#lessons-tab-pane" type="button" role="tab" aria-controls="lessons-tab-pane" aria-selected="true">
            Lecții
        </button>
    </li>
    <li class="nav-item">
        <button class="nav-link " id="general-tab" data-bs-toggle="tab" data-bs-target="#general-tab-pane" type="button" role="tab" aria-controls="general-tab-pane" aria-selected="true">
            <i class="bi bi-gear"></i>
        </button>
    </li>
</ul>
{{/if}}

<div class="tab-content" id="myTabContent">
    <div class="tab-pane show active" id="lessons-tab-pane" role="tabpanel" aria-labelledby="lessons-tab" tabindex="0">
        <section class="mt-4">
            {{#if isEditMode}}
            {{!-- <h4 class="mt-5">Lecții</h4> --}}
            <ol id="table-of-contents" class="pl-0">
                {{#each chapter.lessons}}
                <li>
                    <a href="/cursuri/{{@root.courseId}}/lectii/{{id}}/modifica">{{name}}{{#unless name}}Fără nume{{/unless}}</a>
                    {{#if isHidden}}
                    <a href="/cursuri/{{@root.courseId}}/lectii/{{id}}/modifica">
                        <i class="bi bi-eye-slash text-danger"></i></a>
                    {{/if}}
                </li>
                {{/each}}
            </ol>

            <a href="/cursuri/{{courseId}}/capitole/{{chapter.id}}/lectii/adauga" class="btn btn-primary btn-sm">
            <i class="bi bi-plus-lg"></i> Adaugă lecție</a>

            {{else}}
                <div class="alert alert-info mt-4" role="alert">
                    <i class="bi bi-info-circle me-2"></i>
                    Salvează capitolul pentru a putea adăuga lecții!
                </div>
            {{/if}}
        </section>
    </div>

    <div class="tab-pane show {{#unless isEditMode}}active{{/unless}}" id="general-tab-pane" role="tabpanel" aria-labelledby="general-tab" tabindex="1">
        <section class="mt-4">
            <form method="post" novalidate onsubmit="saveBtn.disabled = true; return true;">

                <div class="row">
                    <div class="col-md-12">
                        <label for="nameInput" class="fw-bold">Nume:</label>
                        <input type="text" name="name" class="form-control" id="nameInput" placeholder=""
                            value="{{chapter.name}}">
                        <small>
                            <p class="text-muted mb-0">Ex: Numere raționale</p>
                        </small>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <label for="descriptionInput" class="fw-bold">Descriere:</label>
                        <textarea type="text" name="description" class="form-control" id="descriptionInput"
                            placeholder="">{{chapter.description}}</textarea>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <label for="positionSelect" class="fw-bold">Poziție:</label>
                        <select name="position" class="form-select" id="positionSelect">
                            {{#select selectedPosition}}
                            {{#each availablePositions}}
                            <option value="{{index}}">{{name}}</option>
                            {{/each}}
                            {{/select}}
                        </select>
                        <small>
                            <p class="text-muted mb-0">Poziția în cadrul listei</p>
                        </small>
                    </div>
                </div>

                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="isHiddenCheck" name="isHidden" {{#if
                        chapter.isHidden}}checked{{/if}}>
                    <label class="form-check-label" for="isHiddenCheck">Ascunde</label>
                    <small>
                        <p class="text-muted mb-0">Doar tu (proprietarul) poți vedea resursele ascunse</p>
                    </small>
                </div>

                <input type="hidden" name="courseId" value="{{courseId}}" />

                <div class="mt-4">
                    <div class="col-md-7s offset-md-3s">
                        <button type="submit" name="saveBtn" class="btn btn-primary"><i class="bi bi-save"></i>
                            Salveaza</button>

                        {{#if isEditMode}}
                        <button type="submit" formaction="/cursuri/{{courseId}}/capitole/{{chapter.id}}/sterge"
                            name="deleteBtn" class="btn btn-link"
                            onclick="return confirm('Ești sigur că vrei să ștergi acest capitol?');"><i
                                class="bi bi-trash-fill"></i>
                            Șterge</button>
                        {{/if}}
                    </div>
                </div>

            </form>
        </section>
    </div>
</div>










